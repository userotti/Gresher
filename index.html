<!DOCTYPE HTML>
<html>
<head>
	<title>pixi.js example 13 - Graphics</title>
	<style>
		body {
			margin: 0;
			padding: 0;
			background-color: #000000;
		}
	</style>
	
	<script src="bower_components/pixi/bin/pixi.dev.js"></script>

	<script src="js/towercreation.js"></script>
	
</head>
<body>
	<script>
	
	
	var stage = new PIXI.Stage(0x15284c, true);
	
	stage.setInteractive(true);
	var renderer = PIXI.autoDetectRenderer(1000, 300);
	
	renderer.view.style.display = "block";
	 
	// add render view to DOM
	document.body.appendChild(renderer.view);
	



	



	var towers = [];
	
	for (var i = 0; i < 6; i++) {
	
		towers.push(makeCrystalAndReturn());
	}	



	for (var i = 0; i < 6; i++) {
	
		towers.push(makeJellieAndReturn());
	}	

	for (var i = 0; i < towers.length; i++) {
	

		stage.addChild(towers[i]);

	}	
	//stage adding	

	
	

	
	var count = 0;


	// run the render loop
	requestAnimFrame(loop);



	function loop() {
		
		count += 0.03;
		
	for (var i = 0; i < towers.length; i++) {
			
		towers[i].getChildAt(1).rotation = count * towers[i].reload;
		towers[i].getChildAt(0).rotation = -(count * towers[i].reload/4) 

		towers[i].position.x = towers[i].position.x + towers[i].velx;
		towers[i].position.y = towers[i].position.y + towers[i].vely;
	}	

	    	renderer.render(stage);
	    	requestAnimFrame( loop );
	}


	</script>

	</body>
</html>
