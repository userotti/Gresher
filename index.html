<!DOCTYPE HTML>
<html>
<head>
	<title>Gresher Alpha</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, minimal-ui">

    <link rel="stylesheet" href="css/styles.css" type="text/css" />

    <!-- Libraries -->
    <script type="text/javascript" src="js/libs/soundjs-NEXT.combined.js"></script>
	<script type="text/javascript" src="js/libs/preloadjs-NEXT.min.js"></script>
    <script src="js/libs/stats.min.js"></script>
    <script src="js/libs/pixi.js"></script>
    <script src="js/libs/gamecore.min.js"></script>

    <!--<script src="js/libs/jquery-1.11.0.min.js"></script> -->
   
    
    <!-- Gresher Javascript -->

    <script type="text/javascript" src="js/texturegroups.js"></script>
	<script src="js/globals.js"></script>
	<script src="js/destenationspresets.js"> </script>
	<script src="js/ai.js"></script>
	<script src="js/smaatclasses.js"></script>
	<script src="js/camera.js"></script>
	<script src="js/colorfuncs.js"></script>
	<script src="js/towerpresets.js"></script>
	<script src="js/shrappresets.js"></script>
	<script src="js/shrap.js"></script>
	<script src="js/tower.js"></script>
	<script src="js/level.js"></script>
	<script src="js/gamescene.js"></script>
	<script src="js/loadingscene.js"></script>
	<script src="js/gresher.js"></script>

	

</head>
<body>
	
	<div style=" position: fixed; right:  0; color: #fff; font-family: Arial; font-size: 10px; z-index: 999; ">
		<div style=" padding: 0.2em 0.5em; ">
		<u>M</u>usic On/Off
		</div>
	</div>
	
	<script>
//console.log("fsdfsd");
	//device resize call
	


	//KEYBOARD
	var Key = {
	  _pressed: {},

	  LEFT: 37,
	  UP: 38,
	  RIGHT: 39,
	  DOWN: 40,
	  
	  isDown: function(keyCode) {
	    return this._pressed[keyCode];
	  },
	  
	  onKeydown: function(event) {
	    this._pressed[event.keyCode] = true;
	  },
	  
	  onKeyup: function(event) {
	    delete this._pressed[event.keyCode];
	  }
	};

	window.addEventListener('keyup', function(event) { Key.onKeyup(event); }, false);
	window.addEventListener('keydown', function(event) { Key.onKeydown(event); }, false);
	window.addEventListener('keypress', function(event) { keypressed() }, false);
	//make the fps stats

	stats = new Stats();
    document.body.appendChild( stats.domElement );
    stats.domElement.style.position = "fixed";
    stats.domElement.style.zIndex = "999";
    stats.domElement.style.bottom = "0px";
    stats.domElement.style.right = "0px";


    //external texture manager
    var texturegroups = new TextureGroups();
    //make the game instance
    var gresher = new Gresher();
	document.body.appendChild(gresher.renderer.view);

	
	keypressed = function(){
	
		console.log("Key Pressed");
		
		console.log(event.keyCode);
		if (event.keyCode == 109) { // M
			if(gresher.music.volume  == 0){
				gresher.music.volume = 0.5;
			} else {
				gresher.music.volume = 0;
			}
		} else {
			gresher.paused = !(gresher.paused);
	  }

	}

    // THIS FUNCTION CALL KICKS OFF THE WHOLE RENDER LOOP PARTY 
	requestAnimFrame(update);

	//the main loop function
	function update() {
		
		if (Key.isDown(Key.UP)) {
			
	
		}	

		stats.begin();	
		gresher.gameupdate();
		requestAnimFrame( update );
        stats.end();
	}

	//the main resize function
	window.onresize = function resize() {
		gresher.resize();
	}

	

    </script>

	</body>
</html>
